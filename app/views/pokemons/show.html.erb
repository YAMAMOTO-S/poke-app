<div class="container">
  <div class="poketeble">
      <table>
        <tr>
          <th></th>
          <th>No</th>
          <th>Name</th>
          <th>Type</th>
          <th>Trainer</th>
          <th>Favorite</th>
        </tr>
        <% if @pokemon.present? %>
        <tr>
          <td><%= image_tag(@pokemon.image_url, size: "200") %></td>
          <td><%= @pokemon.order %></td>
          <td><%= @pokemon.name %></td>
          <td><%= @pokemon.type1 %></td>
          <td><a href="/users/<%= @pokemon.user.id %>">
              <%= @pokemon.user.nickname %>
            </a></td>

          <td class="center-align"><% if user_signed_in? %>
            <% if @pokemon.favorited_by?(current_user) %>
            <!-- ログインしているユーザーがファボしたかどうかで分岐 -->
            <div class="fav-icons">
              <%= link_to pokemon_favorites_path(@pokemon.id), method: :delete  do %>
                <i class="samll material-icons">mood</i>
              <% end %>
                <p><%= @pokemon.favorites.count %></p>
            </div>

            <% else %>

            <div class="not-fav">
            <%=link_to pokemon_favorites_path(@pokemon.id), method: :post  do %>
              <i class="samll material-icons">mood</i>
            <% end %>
              <p><%= @pokemon.favorites.count %></p>
            </div>
            <% end %>
            <% else %>
            <p><span>Number of favorites: </span><%= pokemon.favorites.count %></p>
            <% end %></td>
            
        </tr>
        <% end %>
      </table>
  </div>

<%# ポケモンテキスト %>
  <div class="desc">
    <% if @pokemon.present? %>
    <div class="card">
      <div class="card-content white-text">
        <span class="card-title center-align">Flaver text</span>
        <p class="center-align"><%= @pokemon.description %></p>
      </div>
    </div>
    <% end %>
  </div>



    <div class="comment-area">
    <div class="col s6">
      <div class=" input-field comment_form center-align">
        <% if current_user %>
          <%= form_with(model: [@pokemon, @comment], local: true) do |form| %>
            <%= form.text_area :text, placeholder: "Comment", class: "materialize-textarea"%>
            <a class="waves-effect waves-light btn-large" style="margin-top: 30px"><i class="material-icons left">search</i><%= form.submit 'send'%></a>
          <% end %>
        <% else %>
          <p>ログインが必要です</p>
        <% end %>
      </div>
    </div>
    </div>
    
  <div class="row">
    <div class="col s12">
      <% if @comments %>
      <% @comments.each do |comment| %>
      <div class="card comment_card">
        <div class="card-content comment_name">
          <%= image_tag comment.user.image.url, size: "50"%>
          <p style="margin-top: 18px; margin-left: 10px;"><%= comment.user.nickname%></p>
        </div>
        <div class="card-content comment_text">
          <%= comment.text %>
        </div>
      </div>
      <% end %>
      <% end %>

    </div>
  </div>

</div>